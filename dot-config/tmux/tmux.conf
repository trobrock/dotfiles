# set leader to Ctrl-a
set -g prefix C-a

# reload tmux config
unbind r
bind r source-file ~/.config/tmux/tmux.conf

# enable mouse
set -g mouse on

# use vim keys
setw -g mode-keys vi

# # True color settings
set -g default-terminal "$TERM"
set -ag terminal-overrides ",$TERM:Tc"

# tokyo night config
set -g @tokyo-night-tmux_show_battery_widget 0
set -g status-position top

# window splits | for vertical, - for horizontal (30% height), _ for horizontal (50/50), c for tab
bind | split-window -h -l 30% -c "#{pane_current_path}"
bind - split-window -v -l 30% -c "#{pane_current_path}"
bind _ split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# add clear screen binding, since tmux-navigator uses Ctrl-l
bind C-l send-keys 'C-l'

# resize panes
bind-key -r -T prefix Up resize-pane -U
bind-key -r -T prefix Down resize-pane -D
bind-key -r -T prefix Left resize-pane -L
bind-key -r -T prefix Right resize-pane -R

# switch to last window with Ctrl-a Ctrl-a
bind-key C-a last-window

# git binding
bind-key -n C-g display-popup -E -d '#{pane_current_path}' -w 90% -h 90% lazygit

# vim-sensible sets this, but since the latest upgrade of tmux it breaks: https://github.com/tmux-plugins/tpm/issues/295
# Only use reattach-to-user-namespace on macOS
if-shell "uname | grep -q Darwin" "set-option -g default-command 'reattach-to-user-namespace -l /bin/zsh'"

# ============================================================================
# MINIMAL CATPPUCCIN MOCHA THEME
# ============================================================================

# Catppuccin Mocha colors
# Background: #1e1e2e (base)
# Surface: #313244 (surface0)
# Overlay: #6c7086 (overlay0)
# Text: #cdd6f4 (text)
# Accent: #cba6f7 (mauve)
# Green: #a6e3a1 (green)
# Blue: #89b4fa (blue)

# Status bar with transparent background
set -g status-style 'bg=default,fg=#cdd6f4'
set -g status-left-length 20
set -g status-right-length 50

# Window status colors
set -g window-status-current-style 'bg=#313244,fg=#cba6f7,bold'
set -g window-status-style 'bg=default,fg=#6c7086'
set -g window-status-separator ''

# Pane border colors
set -g pane-border-style 'fg=#313244'
set -g pane-active-border-style 'fg=#cba6f7'

# Message colors
set -g message-style 'bg=#313244,fg=#cdd6f4'
set -g message-command-style 'bg=#313244,fg=#cdd6f4'

# Status bar content with transparent sections
set -g status-left ''
set -g status-right '#[bg=#45475a,fg=#cdd6f4,bold] #S '

# Window status format - Enhanced styling with balanced active tab distinction
set -g window-status-format '#[bg=#181825,fg=#6c7086] #I #[fg=#9399b2]#W #[bg=default] '
set -g window-status-current-format '#[bg=#45475a,fg=#cba6f7,bold] #I #[bg=#45475a,fg=#cdd6f4,bold]#W #[bg=default] '

# Clock mode color
set -g clock-mode-colour '#cba6f7'

# Copy mode colors
set -g mode-style 'bg=#313244,fg=#cdd6f4'

# ============================================================================
# END THEME CONFIGURATION
# ============================================================================

# plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'omerxx/tmux-sessionx'

# run TPM
run '~/.config/tmux/plugins/tpm/tpm'
